<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGen Market - Egypt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;600;800&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', 'Cairo', sans-serif; background: #f8fafc; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .step-hidden { display: none; }
        .arabic { direction: rtl; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="text-gray-800">

    <nav class="p-4 glass sticky top-0 z-50 shadow-sm flex justify-between items-center px-8 border-b">
        <div class="text-2xl font-extrabold text-blue-700">WebGen<span class="text-gray-400">AI</span></div>
        <button onclick="toggleLang()" id="langBtn" class="bg-blue-50 text-blue-600 px-5 py-2 rounded-full font-bold hover:bg-blue-600 hover:text-white transition">العربية</button>
    </nav>

    <div class="max-w-6xl mx-auto p-6">
        
        <div id="page1" class="mt-12 text-center space-y-8 fade-in">
            <h1 id="h1_p1" class="text-4xl md:text-6xl font-extrabold text-gray-900">Build your website <span class="text-blue-600">Instantly.</span></h1>
            <p id="p_p1" class="text-gray-500 text-xl">Describe your business and our AI will generate the design and price.</p>
            
            <div class="max-w-3xl mx-auto bg-white p-2 rounded-3xl shadow-2xl border flex flex-col">
                <textarea id="userNeeds" class="w-full p-6 h-40 rounded-2xl border-none text-lg outline-none resize-none" placeholder="Try: I want a modern dark-themed website for a pizza restaurant..."></textarea>
                <button onclick="generateSite()" class="m-2 bg-blue-600 text-white px-10 py-5 rounded-2xl text-xl font-bold hover:bg-blue-700 transition-all shadow-lg">✨ Generate Preview & Price</button>
            </div>
        </div>

        <div id="page2" class="step-hidden mt-8 fade-in">
            <div class="flex flex-col lg:flex-row gap-8">
                
                <div class="lg:w-2/3 space-y-6">
                    <div class="bg-white p-2 rounded-3xl shadow-2xl border border-gray-100 overflow-hidden">
                        <div class="bg-gray-100 p-3 flex gap-2 items-center">
                            <div class="flex gap-1.5"><div class="w-3 h-3 bg-red-400 rounded-full"></div><div class="w-3 h-3 bg-yellow-400 rounded-full"></div><div class="w-3 h-3 bg-green-400 rounded-full"></div></div>
                            <span class="text-xs text-gray-400 font-mono ml-4">Generated_Design_Live.png</span>
                        </div>
                        <img id="mainImage" src="" class="w-full h-[500px] object-cover rounded-b-2xl transition-all duration-700">
                    </div>

                    <div class="bg-white p-6 rounded-3xl shadow-lg border border-blue-50">
                        <h3 id="editLabel" class="font-bold text-lg mb-3">Adjust your design:</h3>
                        <div class="flex flex-wrap gap-3">
                            <input id="editInput" type="text" class="flex-1 min-w-[200px] p-4 bg-gray-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-400" placeholder="e.g. Change color to luxury gold...">
                            <button onclick="applyEdit()" class="bg-gray-900 text-white px-8 py-4 rounded-2xl font-bold hover:bg-black transition">Update Design</button>
                        </div>
                    </div>
                </div>

                <div class="lg:w-1/3">
                    <div class="bg-white p-8 rounded-3xl shadow-2xl border-t-8 border-blue-600 sticky top-28">
                        <h3 id="summaryLabel" class="text-2xl font-bold mb-6">Price Summary</h3>
                        <div id="featureList" class="space-y-4 mb-10"></div>
                        
                        <div class="pt-6 border-t border-dashed">
                            <span id="costLabel" class="text-gray-400 font-bold uppercase text-xs tracking-widest">Estimated Total</span>
                            <div class="text-5xl font-black text-gray-900 mt-2"><span id="finalPrice">0</span> <span class="text-lg">EGP</span></div>
                        </div>

                        <button onclick="sendWhatsApp()" class="mt-10 w-full bg-[#25D366] text-white py-5 rounded-2xl font-black text-lg flex items-center justify-center gap-3 hover:scale-105 transition-transform shadow-xl">
                            Confirm Order
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        let currentLang = 'en';
        let price = 5000;
        let userDescription = "";

        const textData = {
            en: { h1: "Build your website <span class='text-blue-600'>Instantly.</span>", p1: "Describe your business and our AI will generate the design.", edit: "Adjust your design:", sum: "Price Summary", cost: "Estimated Total", btn: "Confirm Order", ph: "Try: I want a modern dark-themed website for a pizza restaurant..." },
            ar: { h1: "اصنع موقعك <span class='text-blue-600'>في لحظات.</span>", p1: "صف نشاطك التجاري وسيقوم الذكاء الاصطناعي بتوليد التصميم.", edit: "تعديل التصميم:", sum: "ملخص السعر", cost: "الإجمالي التقديري", btn: "تأكيد الطلب", ph: "مثال: أريد موقع مطعم بيتزا بتصميم ليلي فاخر..." }
        };

        function toggleLang() {
            currentLang = currentLang === 'en' ? 'ar' : 'en';
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.body.classList.toggle('arabic', currentLang === 'ar');
            document.getElementById('langBtn').innerText = currentLang === 'en' ? 'العربية' : 'English';
            updateUIText();
        }

        function updateUIText() {
            document.getElementById('h1_p1').innerHTML = textData[currentLang].h1;
            document.getElementById('p_p1').innerText = textData[currentLang].p1;
            document.getElementById('userNeeds').placeholder = textData[currentLang].ph;
            document.getElementById('editLabel').innerText = textData[currentLang].edit;
            document.getElementById('summaryLabel').innerText = textData[currentLang].sum;
            document.getElementById('costLabel').innerText = textData[currentLang].cost;
        }

        function generateSite() {
            userDescription = document.getElementById('userNeeds').value;
            if (!userDescription) return alert("Please describe your website first!");

            // 1. SHOW THE NEXT PAGE
            document.getElementById('page1').classList.add('step-hidden');
            document.getElementById('page2').classList.remove('step-hidden');

            // 2. THE PHOTO LOGIC (Search for keywords in their text)
            const img = document.getElementById('mainImage');
            const searchTerms = userDescription.toLowerCase().replace(/ /g, ',');
            // Using Source Unsplash to get a photo matching their specific keywords
            img.src = `https://source.unsplash.com/featured/800x600?${searchTerms},website,ui`;

            // 3. PRICE CALCULATION
            price = 5000;
            if(userDescription.includes('shop') || userDescription.includes('متجر')) price += 10000;
            if(userDescription.includes('booking') || userDescription.includes('حجز')) price += 4000;
            
            document.getElementById('finalPrice').innerText = price.toLocaleString();
            renderFeatures();
        }

        function renderFeatures() {
            const list = document.getElementById('featureList');
            list.innerHTML = `<div class="flex items-center gap-3 text-gray-700">✅ <span>Custom Design based on: "${userDescription.substring(0,20)}..."</span></div>`;
        }

        function applyEdit() {
            const edit = document.getElementById('editInput').value;
            if(!edit) return;

            // Update photo to reflect the new edit keyword
            const img = document.getElementById('mainImage');
            img.style.opacity = "0.3";
            
            setTimeout(() => {
                const searchTerms = (userDescription + "," + edit).toLowerCase().replace(/ /g, ',');
                img.src = `https://source.unsplash.com/featured/800x600?${searchTerms},website`;
                img.style.opacity = "1";
                
                price += 1500; // Each edit adds to the cost
                document.getElementById('finalPrice').innerText = price.toLocaleString();
                
                const list = document.getElementById('featureList');
                list.innerHTML += `<div class="flex items-center gap-3 text-blue-600 font-bold fade-in">✨ <span>Applied: ${edit}</span></div>`;
                document.getElementById('editInput').value = "";
            }, 600);
        }

        function sendWhatsApp() {
            const phone = "201015653338";
            const message = `Hello! I want this website:%0A%0ADescription: ${userDescription}%0AFinal Price: ${price} EGP`;
            window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
        }
    </script>
</body>
</html>
